{"version":3,"file":"site-read.min.js","names":["applyExtensionFilters","a","filterButtons","document","querySelectorAll","filterRows","length","allowedFilters","forEach","el","dataset","extFilter","bsToggle","ariaPressed","includes","push","options","akeeba","System","getOptions","extensionsFilters","window","localStorage","setItem","JSON","stringify","filterString","getElementById","value","toLowerCase","row","shouldShow","filterClass","classList","contains","matchesString","elName","elKey","elAuthor","i","innerText","j","k","remove","add","restoreExtensionFilters","activeFilters","json","getItem","parse","e","triggerEvent","rememberCollapsibles","collapsible","localStorageKey","collapsed","_typeof","slice","call","elCollapsible","id","addEventListener","idx","indexOf","splice","restoreCollapsibles","onDOMContentLoaded","f","event","b","c","profileId","url","enqueue","location","tooltipTriggerList","tooltipList","_toConsumableArray","map","tooltipTriggerEl","bootstrap","Tooltip","readyState"],"sources":["site-read.js"],"sourcesContent":["/*!*\n * @package   panopticon\n * @copyright Copyright (c)2023-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   https://www.gnu.org/licenses/agpl-3.0.txt GNU Affero General Public License, version 3 or later\n */\n\n(() =>\n{\n    /**\n     * Apply the extensions filters\n     */\n    const applyExtensionFilters = () =>\n    {\n        const filterButtons = document.querySelectorAll(\".extensionFilter\");\n        const filterRows    = document.querySelectorAll(\"tr.extension-row\");\n\n        if (!filterButtons || filterButtons.length < 1 || !filterRows || filterRows.length < 1)\n        {\n            return;\n        }\n\n        let allowedFilters = [];\n\n        filterButtons.forEach((el) =>\n        {\n            if (!el.dataset.extFilter || !el.dataset.bsToggle || el.dataset.bsToggle !== \"button\" || el.ariaPressed !== \"true\")\n            {\n                return;\n            }\n\n            if (allowedFilters.includes(el.dataset.extFilter))\n            {\n                return;\n            }\n\n            allowedFilters.push(el.dataset.extFilter);\n        });\n\n        const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n\n        if (options.extensionsFilters)\n        {\n            window.localStorage.setItem(options.extensionsFilters, JSON.stringify(allowedFilters));\n        }\n\n        const filterString = document.getElementById(\"extensions-filter-search\")?.value?.toLowerCase();\n\n        filterRows.forEach((row) =>\n        {\n            let shouldShow = true;\n\n            if (allowedFilters.length >= 1)\n            {\n                allowedFilters.forEach((filterClass) =>\n                {\n                    shouldShow = shouldShow && row.classList.contains(filterClass);\n                });\n            }\n\n            let matchesString = false;\n\n            if (typeof filterString === \"string\" && filterString.length > 0)\n            {\n                const elName   = row.querySelectorAll(\".extensions-filterable-name\");\n                const elKey    = row.querySelectorAll(\".extensions-filterable-key\");\n                const elAuthor = row.querySelectorAll(\".extensions-filterable-author\");\n\n                if (elName.length)\n                {\n                    matchesString = matchesString || elName[0]?.innerText?.toLowerCase()?.includes(filterString);\n                }\n\n                if (elKey.length)\n                {\n                    matchesString = matchesString || elKey[0]?.innerText?.toLowerCase()?.includes(filterString);\n                }\n\n                if (elAuthor.length)\n                {\n                    matchesString = matchesString || elAuthor[0]?.innerText?.toLowerCase()?.includes(filterString);\n                }\n            }\n            else\n            {\n                matchesString = true;\n            }\n\n            if (shouldShow && matchesString)\n            {\n                row.classList.remove(\"d-none\");\n            }\n            else\n            {\n                row.classList.add(\"d-none\");\n            }\n        });\n    }\n\n    /**\n     * Restore the extensions filters state from the browser's local storage\n     */\n    const restoreExtensionFilters = () =>\n    {\n        const filterButtons = document.querySelectorAll(\".extensionFilter\");\n\n        if (!filterButtons || filterButtons.length < 1)\n        {\n            return;\n        }\n\n        let activeFilters = [];\n\n        try\n        {\n            const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n            const json    = window.localStorage.getItem(options.extensionsFilters);\n\n            activeFilters = JSON.parse(json);\n        }\n        catch (e)\n        {\n            return;\n        }\n\n        if (!activeFilters)\n        {\n            return;\n        }\n\n        filterButtons.forEach((el) =>\n        {\n            if (!el.dataset.extFilter || !el.dataset.bsToggle || el.dataset.bsToggle !== \"button\")\n            {\n                return;\n            }\n\n            if (activeFilters.includes(el.dataset.extFilter))\n            {\n                akeeba.System.triggerEvent(el, \"click\");\n            }\n        });\n\n    };\n\n    const rememberCollapsibles = () =>\n    {\n        const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n\n        if (!options.collapsible)\n        {\n            return;\n        }\n\n        const localStorageKey = options.collapsible;\n        const json            = window.localStorage.getItem(localStorageKey) ?? \"\";\n        let collapsed         = [];\n\n        try\n        {\n            collapsed = JSON.parse(json);\n        }\n        catch (e)\n        {\n            collapsed = [];\n        }\n\n        if (typeof collapsed !== \"object\")\n        {\n            collapsed = [];\n        }\n\n        [].slice.call(document.querySelectorAll(\".collapse\")).forEach((elCollapsible) =>\n        {\n            const id = elCollapsible.id;\n\n            elCollapsible.addEventListener(\"hide.bs.collapse\", () =>\n            {\n                if (collapsed.includes(id))\n                {\n                    return;\n                }\n\n                collapsed.push(id);\n\n                window.localStorage.setItem(localStorageKey, JSON.stringify(collapsed));\n            });\n\n            elCollapsible.addEventListener(\"show.bs.collapse\", () =>\n            {\n                const idx = collapsed.indexOf(id);\n\n                if (idx < 0)\n                {\n                    return;\n                }\n\n                collapsed.splice(idx, 1);\n\n                window.localStorage.setItem(localStorageKey, JSON.stringify(collapsed));\n            })\n        });\n    };\n\n    const restoreCollapsibles = () =>\n    {\n        const options = akeeba.System.getOptions(\"panopticon.siteRemember\", {});\n\n        if (!options.collapsible)\n        {\n            return;\n        }\n\n        const localStorageKey = options.collapsible;\n        const json            = window.localStorage.getItem(localStorageKey) ?? \"\";\n        let collapsed         = [];\n\n        try\n        {\n            collapsed = JSON.parse(json);\n        }\n        catch (e)\n        {\n            collapsed = [];\n        }\n\n        if (typeof collapsed !== \"object\")\n        {\n            collapsed = [];\n        }\n\n        [].slice.call(collapsed).forEach((id) =>\n        {\n            const elCollapsible = document.getElementById(id);\n\n            if (!elCollapsible)\n            {\n                return;\n            }\n\n            elCollapsible.classList.remove(\"show\");\n        });\n    };\n\n    /**\n     * Runs when the DOM is ready (page has loaded)\n     */\n    const onDOMContentLoaded = () =>\n    {\n        // Akeeba Backup buttons\n        document.getElementById(\"akeebaBackupTakeButton\")?.addEventListener(\"click\", (event) =>\n        {\n            const profileId = document.getElementById(\"akeebaBackupTakeProfile\")?.value;\n            const url       = akeeba.System.getOptions(\"akeebabackup\")?.enqueue + \"&profile_id=\" + profileId;\n\n            if (!profileId)\n            {\n                return;\n            }\n\n            window.location = url;\n        });\n\n        // Extension filter tooltips\n        const tooltipTriggerList = document.querySelectorAll(\"[data-toggle-tooltip=\\\"tooltip\\\"]\")\n        const tooltipList        = [...tooltipTriggerList].map(\n            tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));\n\n        // Extension filters\n        restoreExtensionFilters();\n\n        [].slice.call(document.querySelectorAll(\".extensionFilter\")).forEach((el) =>\n        {\n            el.addEventListener(\"click\", applyExtensionFilters)\n        });\n\n        document.getElementById('extensions-filter-search-button')?.\n            addEventListener(\"click\", applyExtensionFilters);\n\n        applyExtensionFilters();\n\n        // Remember collapsible status\n        restoreCollapsibles();\n        rememberCollapsibles();\n    };\n\n    // Workaround for this file loading before the DOM has been loaded on fast servers.\n    if (document.readyState === \"loading\")\n    {\n        document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n    }\n    else\n    {\n        onDOMContentLoaded();\n    }\n})();\n"],"mappings":"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"}