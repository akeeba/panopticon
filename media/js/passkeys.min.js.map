{"version":3,"file":"passkeys.min.js","names":["window","akeeba","Passwordless","Ajax","System","document","reportErrorToUser","message","alert","initCreateCredentials","resident","navigator","Text","_","postBackData","ajax","getOptions","initURL","method","data","success","response","publicKey","JSON","parse","createCredentials","exception","error","xhr","concat","status","statusText","postURL","createURL","arrayToBase64String","a","btoa","String","fromCharCode","apply","_toConsumableArray","base64url2base64","input","output","replace","pad","length","Error","Array","join","challenge","Uint8Array","from","atob","c","charCodeAt","user","id","excludeCredentials","map","credentials","create","then","publicKeyCredential","type","rawId","clientDataJSON","attestationObject","stringify","responseHTML","elements","querySelectorAll","elContainer","outerHTML","initManagement","catch","editLabel","that","saveLabelURL","elTR","parentElement","credentialId","dataset","credential_id","elTDs","elLabelTD","elButtonsTD","elButtons","elEdit","elDelete","elLabel","oldLabel","innerText","elInput","createElement","className","name","defaultValue","elGUIContainer","elButtonContainer","elSave","addEventListener","elNewLabel","value","new_label","rawResponse","result","elCancel","click","disabled","appendChild","innerHTML","delete","deleteURL","e","removeChild","addOnClick","event","preventDefault","addPasskeyOnClick","editOnClick","currentTarget","deleteOnClick","addButton","getElementById","addPasskeyButton","editLabelButtons","slice","call","forEach","button","deleteButtons","onDOMContentLoaded","readyState"],"sources":["passkeys.js"],"sourcesContent":["/**\n * @package   panopticon\n * @copyright Copyright (c)2023-2026 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   https://www.gnu.org/licenses/agpl-3.0.txt GNU Affero General Public License, version 3 or later\n */\n\nwindow.akeeba              = window.akeeba || {};\nwindow.akeeba.Passwordless = window.akeeba.Passwordless || {};\n\n((Ajax, System, Passwordless, document) =>\n{\n    \"use strict\";\n\n    const reportErrorToUser = (message) =>\n    {\n        alert(message);\n    }\n\n    Passwordless.initCreateCredentials = (resident) =>\n    {\n        // Make sure the browser supports Webauthn\n        if (!(\"credentials\" in navigator))\n        {\n            reportErrorToUser(System.Text._(\"PANOPTICON_PASSKEYS_ERR_NO_BROWSER_SUPPORT\"));\n\n            return;\n        }\n\n\n        // Get the public key creation options through AJAX.\n        const postBackData = {\n            resident: resident ? 1 : 0\n        };\n\n        Ajax.ajax(\n            System.getOptions(\"panopticon.passkey\").initURL,\n            {\n                method:  \"POST\",\n                data:    postBackData,\n                success: (response) =>\n                         {\n                             try\n                             {\n                                 const publicKey = JSON.parse(response);\n\n                                 Passwordless.createCredentials(publicKey);\n                             }\n                             catch (exception)\n                             {\n                                 reportErrorToUser(System.Text._(\"PANOPTICON_PASSKEYS_ERR_XHR_INITCREATE\"));\n                             }\n                         },\n                error:   (xhr) =>\n                         {\n                             reportErrorToUser(`${xhr.status} ${xhr.statusText}`);\n                         },\n            }\n        );\n    }\n\n    /**\n     * Ask the user to link an authenticator using the provided public key (created server-side).\n     * Posts the credentials to the URL defined in post_url using AJAX.\n     * That URL must re-render the management interface.\n     *\n     * @param {Object} publicKey The public key request parameters loaded from the server\n     */\n    // eslint-disable-next-line no-unused-vars\n    Passwordless.createCredentials = (publicKey) =>\n    {\n        const postURL             = System.getOptions(\"panopticon.passkey\").createURL;\n        const arrayToBase64String = (a) => btoa(String.fromCharCode(...a));\n        const base64url2base64    = (input) =>\n        {\n            let output = input\n                .replace(/-/g, \"+\")\n                .replace(/_/g, \"/\");\n            const pad  = output.length % 4;\n            if (pad)\n            {\n                if (pad === 1)\n                {\n                    throw new Error(\n                        \"InvalidLengthError: Input base64url string is the wrong length to determine padding\");\n                }\n                output += new Array(5 - pad).join(\"=\");\n            }\n            return output;\n        };\n\n        // Convert the public key information to a format usable by the browser's credentials manager\n        publicKey.challenge = Uint8Array.from(\n            window.atob(base64url2base64(publicKey.challenge)), (c) => c.charCodeAt(0),\n        );\n\n        publicKey.user.id = Uint8Array.from(window.atob(publicKey.user.id), (c) => c.charCodeAt(0));\n\n        if (publicKey.excludeCredentials)\n        {\n            publicKey.excludeCredentials = publicKey.excludeCredentials.map((data) =>\n            {\n                data.id = Uint8Array.from(window.atob(base64url2base64(data.id)), (c) => c.charCodeAt(0));\n                return data;\n            });\n        }\n\n        // Ask the browser to prompt the user for their authenticator\n        navigator.credentials.create({publicKey})\n                 .then((data) =>\n                 {\n                     const publicKeyCredential = {\n                         id:       data.id,\n                         type:     data.type,\n                         rawId:    arrayToBase64String(new Uint8Array(data.rawId)),\n                         response: {\n                             clientDataJSON:    arrayToBase64String(new Uint8Array(data.response.clientDataJSON)),\n                             attestationObject: arrayToBase64String(new Uint8Array(data.response.attestationObject)),\n                         },\n                     };\n\n                     // Send the response to your server\n                     const postBackData = {\n                         data: btoa(JSON.stringify(publicKeyCredential)),\n                     };\n\n                     Ajax.ajax(\n                         postURL,\n                         {\n                             method:  \"POST\",\n                             data:    postBackData,\n                             success: (responseHTML) =>\n                                      {\n                                          const elements = document.querySelectorAll(\n                                              \"#passkey-management-interface\");\n\n                                          if (!elements)\n                                          {\n                                              return;\n                                          }\n\n                                          const elContainer = elements[0];\n\n                                          elContainer.outerHTML = responseHTML;\n\n                                          Passwordless.initManagement();\n                                      },\n                             error: (xhr) =>\n                                      {\n                                          reportErrorToUser(`${xhr.status} ${xhr.statusText}`);\n                                      },\n                         }\n                     );\n                 })\n                 .catch((error) =>\n                 {\n                     // An error occurred: timeout, request to provide the authenticator refused, hardware /\n                     // software error...\n                     reportErrorToUser(error);\n                 });\n    };\n\n    /**\n     * Edit label button\n     *\n     * @param   {Element} that      The button being clicked\n     */\n    // eslint-disable-next-line no-unused-vars\n    Passwordless.editLabel = (that) =>\n    {\n        const postURL = System.getOptions(\"panopticon.passkey\").saveLabelURL;\n\n        // Find the UI elements\n        const elTR         = that.parentElement.parentElement;\n        const credentialId = elTR.dataset.credential_id;\n        const elTDs        = elTR.querySelectorAll(\".passkey-cell\");\n        const elLabelTD    = elTDs[0];\n        const elButtonsTD  = elTDs[1];\n        const elButtons    = elButtonsTD.querySelectorAll(\"button\");\n        const elEdit       = elButtons[0];\n        const elDelete     = elButtons[1];\n        const elLabel      = elLabelTD.querySelectorAll(\".passkey-label\")[0];\n\n        // Show the editor\n        const oldLabel = elLabel.innerText;\n\n        const elInput        = document.createElement(\"input\");\n        elInput.className    = \"flex-grow-1 me-1 mb-1\";\n        elInput.type         = \"text\";\n        elInput.name         = \"label\";\n        elInput.defaultValue = oldLabel;\n\n        const elGUIContainer     = document.createElement(\"div\");\n        elGUIContainer.className = \"d-flex flex-column flex-lg-row\"\n\n        const elButtonContainer     = document.createElement(\"div\");\n        elButtonContainer.className = \"d-flex mt-2 mb-3 mt-lg-0 mb-lg-0\";\n\n        const elSave     = document.createElement(\"button\");\n        elSave.className = \"btn btn-success btn-sm me-1 mb-1 flex-grow-1\";\n        elSave.innerText = System.Text._(\"PANOPTICON_PASSKEYS_MANAGE_BTN_SAVE_LABEL\");\n        elSave.addEventListener(\"click\", () =>\n        {\n            const elNewLabel = elInput.value;\n\n            if (elNewLabel !== \"\")\n            {\n                const postBackData = {\n                    credential_id: credentialId,\n                    new_label:     elNewLabel,\n                };\n\n                Ajax.ajax(\n                    postURL,\n                    {\n                        method: \"POST\",\n                        data:   postBackData,\n                        success(rawResponse)\n                        {\n                            let result = false;\n\n                            try\n                            {\n                                result = JSON.parse(rawResponse);\n                            }\n                            catch (exception)\n                            {\n                                result = (rawResponse === \"true\");\n                            }\n\n                            if (result !== true)\n                            {\n                                reportErrorToUser(\n                                    System.Text._(\"PANOPTICON_PASSKEYS_ERR_LABEL_NOT_SAVED\"),\n                                );\n\n                                elCancel.click();\n                            }\n                        },\n                        error: (xhr) =>\n                                 {\n                                     reportErrorToUser(\n                                         `${System.Text._(\"PANOPTICON_PASSKEYS_ERR_LABEL_NOT_SAVED\")\n                                         } -- ${xhr.status} ${xhr.statusText}`,\n                                     );\n\n                                     elCancel.click();\n                                 },\n                    }\n                );\n            }\n\n            elLabel.innerText = elNewLabel;\n            elEdit.disabled   = false;\n            elDelete.disabled = false;\n\n            return false;\n        }, false);\n\n        const elCancel     = document.createElement(\"button\");\n        elCancel.className = \"btn btn-danger btn-sm me-1 mb-1 flex-grow-1\";\n        elCancel.innerText = System.Text._(\"PANOPTICON_PASSKEYS_MANAGE_BTN_CANCEL_LABEL\");\n        elCancel.addEventListener(\"click\", () =>\n        {\n            elLabel.innerText = oldLabel;\n            elEdit.disabled   = false;\n            elDelete.disabled = false;\n\n            return false;\n        }, false);\n\n        elButtonContainer.appendChild(elSave);\n        elButtonContainer.appendChild(elCancel);\n\n        elGUIContainer.appendChild(elInput);\n        elGUIContainer.appendChild(elButtonContainer);\n        elLabel.innerHTML = \"\";\n        elLabel.appendChild(elGUIContainer);\n        elEdit.disabled   = true;\n        elDelete.disabled = true;\n\n        return false;\n    };\n\n    /**\n     * Delete button\n     *\n     * @param   {Element} that      The button being clicked\n     */\n    // eslint-disable-next-line no-unused-vars\n    Passwordless.delete = (that) =>\n    {\n        const postURL = System.getOptions(\"panopticon.passkey\").deleteURL;\n\n        // Find the UI elements\n        const elTR         = that.parentElement.parentElement;\n        const credentialId = elTR.dataset.credential_id;\n        const elTDs        = elTR.querySelectorAll(\".passkey-cell\");\n        const elButtonsTD  = elTDs[1];\n        const elButtons    = elButtonsTD.querySelectorAll(\"button\");\n        const elEdit       = elButtons[0];\n        const elDelete     = elButtons[1];\n\n        elEdit.disabled   = true;\n        elDelete.disabled = true;\n\n        // Delete the record\n        const postBackData = {\n            credential_id: credentialId,\n        };\n\n        Ajax.ajax(\n            postURL,\n            {\n                method: \"POST\",\n                data:   postBackData,\n                success(rawResponse)\n                {\n                    let result = false;\n\n                    try\n                    {\n                        result = JSON.parse(rawResponse);\n                    }\n                    catch (e)\n                    {\n                        result = (rawResponse === \"true\");\n                    }\n\n                    if (result !== true)\n                    {\n                        reportErrorToUser(\n                            System.Text._(\"PANOPTICON_PASSKEYS_ERR_NOT_DELETED\"),\n                        );\n\n                        elEdit.disabled   = false;\n                        elDelete.disabled = false;\n\n                        return;\n                    }\n\n                    elTR.parentElement.removeChild(elTR);\n                },\n                error: (xhr) =>\n                         {\n                             elEdit.disabled   = false;\n                             elDelete.disabled = false;\n                             reportErrorToUser(\n                                 `${System.Text._(\"PANOPTICON_PASSKEYS_ERR_NOT_DELETED\")\n                                 } -- ${xhr.status} ${xhr.statusText}`,\n                             );\n                         },\n            }\n        );\n\n        return false;\n    };\n\n    /**\n     * Add New Authenticator button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.addOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.initCreateCredentials(false);\n\n        return false;\n    };\n\n    /**\n     * Add New Authenticator button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.addPasskeyOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.initCreateCredentials(true);\n\n        return false;\n    };\n\n    /**\n     * Edit Name button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.editOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.editLabel(event.currentTarget);\n\n        return false;\n    };\n\n    /**\n     * Remove button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.deleteOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.delete(event.currentTarget);\n\n        return false;\n    };\n\n    /**\n     * Initialization on page load.\n     */\n    Passwordless.initManagement = () =>\n    {\n        const addButton = document.getElementById(\"passkey-manage-add\");\n\n        if (addButton)\n        {\n            addButton.addEventListener(\"click\", Passwordless.addOnClick);\n        }\n\n        const addPasskeyButton = document.getElementById(\"passkey-manage-addresident\");\n\n        if (addPasskeyButton)\n        {\n            addPasskeyButton.addEventListener(\"click\", Passwordless.addPasskeyOnClick);\n        }\n\n        const editLabelButtons = [].slice.call(document.querySelectorAll(\".passkey-manage-edit\"));\n        if (editLabelButtons.length)\n        {\n            editLabelButtons.forEach((button) =>\n            {\n                button.addEventListener(\"click\", Passwordless.editOnClick);\n            });\n        }\n\n        const deleteButtons = [].slice.call(document.querySelectorAll(\".passkey-manage-delete\"));\n        if (deleteButtons.length)\n        {\n            deleteButtons.forEach((button) =>\n            {\n                button.addEventListener(\"click\", Passwordless.deleteOnClick);\n            });\n        }\n    };\n\n    const onDOMContentLoaded = () =>\n    {\n        // Initialization. Runs on DOM content loaded since this script is always loaded deferred.\n        Passwordless.initManagement();\n    }\n\n    if (document.readyState === \"loading\")\n    {\n        document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n    }\n    else\n    {\n        onDOMContentLoaded();\n    }\n})(akeeba.Ajax, akeeba.System, window.akeeba.Passwordless, document)\n"],"mappings":"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","ignoreList":[]}