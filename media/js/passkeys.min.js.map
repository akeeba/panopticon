{"version":3,"file":"passkeys.min.js","names":["window","akeeba","Passwordless","System","document","reportErrorToUser","message","alert","initCreateCredentials","resident","navigator","Text","_","postBackData","ajax","getOptions","method","data","success","response","publicKey","JSON","parse","createCredentials","exception","Joomla","error","xhr","concat","status","statusText","postURL","arrayToBase64String","a","btoa","String","fromCharCode","apply","_toConsumableArray","base64url2base64","input","output","replace","pad","length","Error","Array","join","challenge","Uint8Array","from","atob","c","charCodeAt","user","id","excludeCredentials","map","credentials","create","then","publicKeyCredential","type","rawId","clientDataJSON","attestationObject","stringify","request","responseHTML","elements","querySelectorAll","elContainer","outerHTML","initManagement","reactivateTooltips","onError","catch","editLabel","that","paths","base","location","pathname","elTR","parentElement","credentialId","dataset","credential_id","elTDs","elLabelTD","elButtonsTD","elButtons","elEdit","elDelete","elLabel","oldLabel","innerText","elInput","createElement","className","name","defaultValue","elGUIContainer","elButtonContainer","elSave","addEventListener","elNewLabel","value","option","group","plugin","format","encoding","akaction","new_label","url","interpolateParameters","onSuccess","rawResponse","result","elCancel","click","disabled","appendChild","innerHTML","delete","e","removeChild","tooltips","_typeof","Object","keys","forEach","tooltip","opt","options","animation","container","delay","html","selector","trigger","fallbackPlacement","boundary","title","customClass","sanitize","sanitizeFn","popperConfig","placement","template","allowList","el","bootstrap","Tooltip","addOnClick","event","preventDefault","addPasskeyOnClick","editOnClick","currentTarget","deleteOnClick","addButton","getElementById","addPasskeyButton","editLabelButtons","slice","call","button","deleteButtons","onDOMContentLoaded","readyState"],"sources":["passkeys.js"],"sourcesContent":["/*\n * @package   panopticon\n * @copyright Copyright (c)2023-2024 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   https://www.gnu.org/licenses/agpl-3.0.txt GNU Affero General Public License, version 3 or later\n */\n\nwindow.akeeba              = window.akeeba || {};\nwindow.akeeba.Passwordless = window.akeeba.Passwordless || {};\n\n((System, Passwordless, document) =>\n{\n    \"use strict\";\n\n    const reportErrorToUser = (message) =>\n    {\n        alert(message);\n    }\n\n    Passwordless.initCreateCredentials = (resident) =>\n    {\n        // Make sure the browser supports Webauthn\n        if (!(\"credentials\" in navigator))\n        {\n            reportErrorToUser(System.Text._(\"PANOPTICON_PASSKEYS_ERR_NO_BROWSER_SUPPORT\"));\n\n            return;\n        }\n\n\n        // Get the public key creation options through AJAX.\n        const postBackData = {\n            resident: resident ? 1 : 0\n        };\n\n        System.ajax(\n            System.getOptions(\"panopticon.passkey.initURL\"),\n            {\n                method:  \"POST\",\n                data:    postBackData,\n                success: (response) =>\n                         {\n                             try\n                             {\n                                 const publicKey = JSON.parse(response);\n\n                                 Passwordless.createCredentials(publicKey);\n                             }\n                             catch (exception)\n                             {\n                                 reportErrorToUser(Joomla.Text._(\"PANOPTICON_PASSKEYS_ERR_XHR_INITCREATE\"));\n                             }\n                         },\n                error:   (xhr) =>\n                         {\n                             reportErrorToUser(`${xhr.status} ${xhr.statusText}`);\n                         },\n            }\n        );\n    }\n\n    /**\n     * Ask the user to link an authenticator using the provided public key (created server-side).\n     * Posts the credentials to the URL defined in post_url using AJAX.\n     * That URL must re-render the management interface.\n     *\n     * @param {Object} publicKey The public key request parameters loaded from the server\n     */\n    // eslint-disable-next-line no-unused-vars\n    Passwordless.createCredentials = (publicKey) =>\n    {\n        const postURL             = System.getOptions(\"panopticon.passkey.createURL\");\n        const arrayToBase64String = (a) => btoa(String.fromCharCode(...a));\n        const base64url2base64    = (input) =>\n        {\n            let output = input\n                .replace(/-/g, \"+\")\n                .replace(/_/g, \"/\");\n            const pad  = output.length % 4;\n            if (pad)\n            {\n                if (pad === 1)\n                {\n                    throw new Error(\n                        \"InvalidLengthError: Input base64url string is the wrong length to determine padding\");\n                }\n                output += new Array(5 - pad).join(\"=\");\n            }\n            return output;\n        };\n\n        // Convert the public key information to a format usable by the browser's credentials manager\n        publicKey.challenge = Uint8Array.from(\n            window.atob(base64url2base64(publicKey.challenge)), (c) => c.charCodeAt(0),\n        );\n\n        publicKey.user.id = Uint8Array.from(window.atob(publicKey.user.id), (c) => c.charCodeAt(0));\n\n        if (publicKey.excludeCredentials)\n        {\n            publicKey.excludeCredentials = publicKey.excludeCredentials.map((data) =>\n            {\n                data.id = Uint8Array.from(window.atob(base64url2base64(data.id)), (c) => c.charCodeAt(0));\n                return data;\n            });\n        }\n\n        // Ask the browser to prompt the user for their authenticator\n        navigator.credentials.create({publicKey})\n                 .then((data) =>\n                 {\n                     const publicKeyCredential = {\n                         id:       data.id,\n                         type:     data.type,\n                         rawId:    arrayToBase64String(new Uint8Array(data.rawId)),\n                         response: {\n                             clientDataJSON:    arrayToBase64String(new Uint8Array(data.response.clientDataJSON)),\n                             attestationObject: arrayToBase64String(new Uint8Array(data.response.attestationObject)),\n                         },\n                     };\n\n                     // Send the response to your server\n                     const postBackData = {\n                         data: btoa(JSON.stringify(publicKeyCredential)),\n                     };\n\n                     Joomla.request(\n                         postURL,\n                         {\n                             method:  \"POST\",\n                             data:    postBackData,\n                             success: (responseHTML) =>\n                                      {\n                                          const elements = document.querySelectorAll(\n                                              \"#passkey-management-interface\");\n\n                                          if (!elements)\n                                          {\n                                              return;\n                                          }\n\n                                          const elContainer = elements[0];\n\n                                          elContainer.outerHTML = responseHTML;\n\n                                          Passwordless.initManagement();\n                                          Passwordless.reactivateTooltips();\n                                      },\n                             onError: (xhr) =>\n                                      {\n                                          reportErrorToUser(`${xhr.status} ${xhr.statusText}`);\n                                      },\n                         }\n                     );\n                 })\n                 .catch((error) =>\n                 {\n                     // An error occurred: timeout, request to provide the authenticator refused, hardware /\n                     // software error...\n                     reportErrorToUser(error);\n                 });\n    };\n\n    // TODO Edit me\n\n    /**\n     * Edit label button\n     *\n     * @param   {Element} that      The button being clicked\n     */\n    // eslint-disable-next-line no-unused-vars\n    Passwordless.editLabel = (that) =>\n    {\n        const paths   = Joomla.getOptions(\"system.paths\");\n        const postURL = `${paths ? `${paths.base}/index.php` : window.location.pathname}`;\n\n        // Find the UI elements\n        const elTR         = that.parentElement.parentElement;\n        const credentialId = elTR.dataset.credential_id;\n        const elTDs        = elTR.querySelectorAll(\".plg_system_passwordless-cell\");\n        const elLabelTD    = elTDs[0];\n        const elButtonsTD  = elTDs[1];\n        const elButtons    = elButtonsTD.querySelectorAll(\"button\");\n        const elEdit       = elButtons[0];\n        const elDelete     = elButtons[1];\n        const elLabel      = elLabelTD.querySelectorAll(\".plg_system_passwordless-label\")[0];\n\n        // Show the editor\n        const oldLabel = elLabel.innerText;\n\n        const elInput        = document.createElement(\"input\");\n        elInput.className    = \"flex-grow-1 me-1 mb-1\";\n        elInput.type         = \"text\";\n        elInput.name         = \"label\";\n        elInput.defaultValue = oldLabel;\n\n        const elGUIContainer     = document.createElement(\"div\");\n        elGUIContainer.className = \"d-flex flex-column flex-lg-row\"\n\n        const elButtonContainer     = document.createElement(\"div\");\n        elButtonContainer.className = \"d-flex mt-2 mb-3 mt-lg-0 mb-lg-0\";\n\n        const elSave     = document.createElement(\"button\");\n        elSave.className = \"btn btn-success btn-sm me-1 mb-1 flex-grow-1\";\n        elSave.innerText = Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_MANAGE_BTN_SAVE_LABEL\");\n        elSave.addEventListener(\"click\", () =>\n        {\n            const elNewLabel = elInput.value;\n\n            if (elNewLabel !== \"\")\n            {\n                const postBackData                            = {\n                    option:        \"com_ajax\",\n                    group:         \"system\",\n                    plugin:        \"passwordless\",\n                    format:        \"json\",\n                    encoding:      \"json\",\n                    akaction:      \"savelabel\",\n                    credential_id: credentialId,\n                    new_label:     elNewLabel,\n                };\n                postBackData[Joomla.getOptions(\"csrf.token\")] = 1;\n\n                Joomla.request({\n                    url:    postURL,\n                    method: \"POST\",\n                    data:   interpolateParameters(postBackData),\n                    onSuccess(rawResponse)\n                    {\n                        let result = false;\n\n                        try\n                        {\n                            result = JSON.parse(rawResponse);\n                        }\n                        catch (exception)\n                        {\n                            result = (rawResponse === \"true\");\n                        }\n\n                        if (result !== true)\n                        {\n                            reportErrorToUser(\n                                Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_ERR_LABEL_NOT_SAVED\"),\n                            );\n\n                            elCancel.click();\n                        }\n                    },\n                    onError: (xhr) =>\n                             {\n                                 reportErrorToUser(\n                                     `${Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_ERR_LABEL_NOT_SAVED\")\n                                     } -- ${xhr.status} ${xhr.statusText}`,\n                                 );\n\n                                 elCancel.click();\n                             },\n                });\n            }\n\n            elLabel.innerText = elNewLabel;\n            elEdit.disabled   = false;\n            elDelete.disabled = false;\n\n            return false;\n        }, false);\n\n        const elCancel     = document.createElement(\"button\");\n        elCancel.className = \"btn btn-danger btn-sm me-1 mb-1 flex-grow-1\";\n        elCancel.innerText = Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_MANAGE_BTN_CANCEL_LABEL\");\n        elCancel.addEventListener(\"click\", () =>\n        {\n            elLabel.innerText = oldLabel;\n            elEdit.disabled   = false;\n            elDelete.disabled = false;\n\n            return false;\n        }, false);\n\n        elButtonContainer.appendChild(elSave);\n        elButtonContainer.appendChild(elCancel);\n\n        elGUIContainer.appendChild(elInput);\n        elGUIContainer.appendChild(elButtonContainer);\n        elLabel.innerHTML = \"\";\n        elLabel.appendChild(elGUIContainer);\n        elEdit.disabled   = true;\n        elDelete.disabled = true;\n\n        return false;\n    };\n\n    /**\n     * Delete button\n     *\n     * @param   {Element} that      The button being clicked\n     */\n    // eslint-disable-next-line no-unused-vars\n    Passwordless.delete = (that) =>\n    {\n        const paths   = Joomla.getOptions(\"system.paths\");\n        const postURL = `${paths ? `${paths.base}/index.php` : window.location.pathname}`;\n\n        // Find the UI elements\n        const elTR         = that.parentElement.parentElement;\n        const credentialId = elTR.dataset.credential_id;\n        const elTDs        = elTR.querySelectorAll(\".plg_system_passwordless-cell\");\n        const elButtonsTD  = elTDs[1];\n        const elButtons    = elButtonsTD.querySelectorAll(\"button\");\n        const elEdit       = elButtons[0];\n        const elDelete     = elButtons[1];\n\n        elEdit.disabled   = true;\n        elDelete.disabled = true;\n\n        // Delete the record\n        const postBackData                            = {\n            option:        \"com_ajax\",\n            group:         \"system\",\n            plugin:        \"passwordless\",\n            format:        \"json\",\n            encoding:      \"json\",\n            akaction:      \"delete\",\n            credential_id: credentialId,\n        };\n        postBackData[Joomla.getOptions(\"csrf.token\")] = 1;\n\n        Joomla.request({\n            url:    postURL,\n            method: \"POST\",\n            data:   interpolateParameters(postBackData),\n            onSuccess(rawResponse)\n            {\n                let result = false;\n\n                try\n                {\n                    result = JSON.parse(rawResponse);\n                }\n                catch (e)\n                {\n                    result = (rawResponse === \"true\");\n                }\n\n                if (result !== true)\n                {\n                    reportErrorToUser(\n                        Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_ERR_NOT_DELETED\"),\n                    );\n\n                    elEdit.disabled   = false;\n                    elDelete.disabled = false;\n\n                    return;\n                }\n\n                elTR.parentElement.removeChild(elTR);\n            },\n            onError: (xhr) =>\n                     {\n                         elEdit.disabled   = false;\n                         elDelete.disabled = false;\n                         reportErrorToUser(\n                             `${Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_ERR_NOT_DELETED\")\n                             } -- ${xhr.status} ${xhr.statusText}`,\n                         );\n                     },\n        });\n\n        return false;\n    };\n\n    Passwordless.reactivateTooltips = () =>\n    {\n        const tooltips = Joomla.getOptions(\"bootstrap.tooltip\");\n        if (typeof tooltips === \"object\" && tooltips !== null)\n        {\n            Object.keys(tooltips).forEach((tooltip) =>\n            {\n                const opt     = tooltips[tooltip];\n                const options = {\n                    animation:         opt.animation ? opt.animation : true,\n                    container:         opt.container ? opt.container : false,\n                    delay:             opt.delay ? opt.delay : 0,\n                    html:              opt.html ? opt.html : false,\n                    selector:          opt.selector ? opt.selector : false,\n                    trigger:           opt.trigger ? opt.trigger : \"hover focus\",\n                    fallbackPlacement: opt.fallbackPlacement ? opt.fallbackPlacement : null,\n                    boundary:          opt.boundary ? opt.boundary : \"clippingParents\",\n                    title:             opt.title ? opt.title : \"\",\n                    customClass:       opt.customClass ? opt.customClass : \"\",\n                    sanitize:          opt.sanitize ? opt.sanitize : true,\n                    sanitizeFn:        opt.sanitizeFn ? opt.sanitizeFn : null,\n                    popperConfig:      opt.popperConfig ? opt.popperConfig : null,\n                };\n\n                if (opt.placement)\n                {\n                    options.placement = opt.placement;\n                }\n                if (opt.template)\n                {\n                    options.template = opt.template;\n                }\n                if (opt.allowList)\n                {\n                    options.allowList = opt.allowList;\n                }\n\n                const elements = Array.from(document.querySelectorAll(tooltip));\n                if (elements.length)\n                {\n                    elements.map((el) => new window.bootstrap.Tooltip(el, options));\n                }\n            });\n        }\n    }\n\n    /**\n     * Add New Authenticator button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.addOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.initCreateCredentials(false);\n\n        return false;\n    };\n\n    /**\n     * Add New Authenticator button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.addPasskeyOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.initCreateCredentials(true);\n\n        return false;\n    };\n\n    /**\n     * Edit Name button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.editOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.editLabel(event.currentTarget);\n\n        return false;\n    };\n\n    /**\n     * Remove button click handler\n     *\n     * @param   {MouseEvent} event  The mouse click event\n     *\n     * @returns {boolean} Returns false to prevent the default browser button behavior\n     */\n    Passwordless.deleteOnClick = (event) =>\n    {\n        event.preventDefault();\n\n        Passwordless.delete(event.currentTarget);\n\n        return false;\n    };\n\n    /**\n     * Initialization on page load.\n     */\n    Passwordless.initManagement = () =>\n    {\n        const addButton = document.getElementById(\"plg_system_passwordless-manage-add\");\n\n        if (addButton)\n        {\n            addButton.addEventListener(\"click\", Passwordless.addOnClick);\n        }\n\n        const addPasskeyButton = document.getElementById(\"plg_system_passwordless-manage-addresident\");\n\n        if (addPasskeyButton)\n        {\n            addPasskeyButton.addEventListener(\"click\", Passwordless.addPasskeyOnClick);\n        }\n\n        const editLabelButtons = [].slice.call(document.querySelectorAll(\".plg_system_passwordless-manage-edit\"));\n        if (editLabelButtons.length)\n        {\n            editLabelButtons.forEach((button) =>\n            {\n                button.addEventListener(\"click\", Passwordless.editOnClick);\n            });\n        }\n\n        const deleteButtons = [].slice.call(document.querySelectorAll(\".plg_system_passwordless-manage-delete\"));\n        if (deleteButtons.length)\n        {\n            deleteButtons.forEach((button) =>\n            {\n                button.addEventListener(\"click\", Passwordless.deleteOnClick);\n            });\n        }\n    };\n\n    // Initialization. Runs on DOM content loaded since this script is always loaded deferred.\n    Passwordless.initManagement();\n\n    const onDOMContentLoaded = () =>\n    {\n\n    }\n\n    if (document.readyState === \"loading\")\n    {\n        document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n    }\n    else\n    {\n        onDOMContentLoaded();\n    }\n})(akeeba.System, window.akeeba.Passwordless, document)\n"],"mappings":"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","ignoreList":[]}