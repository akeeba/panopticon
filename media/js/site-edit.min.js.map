{"version":3,"file":"site-edit.min.js","names":["BoUInitialise","document","getElementById","addEventListener","onBOUReloadExtensionsClick","onBOURelinkClick","onBOUReloadProfiles","akeeba","Showon","initialise","BoUReapplyInterface","text","outerHTML","BoUShowSpinner","classList","add","remove","BoUHideSpinner","options","System","getOptions","url","reload","window","Ajax","ajax","method","success","relink","refresh","profilesSelect","value","onDOMContentLoaded","Choices","querySelectorAll","forEach","element","allowHTML","placeholder","placeholderValue","removeItemButton","readyState"],"sources":["site-edit.js"],"sourcesContent":["/*\n * @package   panopticon\n * @copyright Copyright (c)2023-2024 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   https://www.gnu.org/licenses/agpl-3.0.txt GNU Affero General Public License, version 3 or later\n */\n\n(() =>\n{\n    const BoUInitialise = () =>\n    {\n        document.getElementById(\"backupOnUpdateReload\").addEventListener(\"click\", onBOUReloadExtensionsClick);\n        document.getElementById(\"backupOnUpdateRelink\").addEventListener(\"click\", onBOURelinkClick);\n        document.getElementById(\"backupOnUpdateReloadProfiles\").addEventListener(\"click\", onBOUReloadProfiles);\n\n        akeeba.Showon.initialise(document.getElementById(\"backupOnUpdateInterface\"));\n    };\n\n    const BoUReapplyInterface = (text) =>\n    {\n        document.getElementById(\"backupOnUpdateInterface\").outerHTML = text;\n\n        BoUInitialise();\n    };\n\n    const BoUShowSpinner = () =>\n    {\n        document.getElementById(\"backupOnUpdateInteractive\").classList.add(\"d-none\");\n        document.getElementById(\"backupOnUpdateSpinner\").classList.remove(\"d-none\");\n    }\n\n    const BoUHideSpinner = () =>\n    {\n        document.getElementById(\"backupOnUpdateInteractive\").classList.remove(\"d-none\");\n        document.getElementById(\"backupOnUpdateSpinner\").classList.add(\"d-none\");\n    }\n\n    const onBOUReloadExtensionsClick = (e) =>\n    {\n        const options = akeeba.System.getOptions(\"panopticon.backupOnUpdate\");\n        const url     = options.reload;\n\n        BoUShowSpinner();\n\n        window.akeeba.Ajax.ajax(url, {\n            method:  \"GET\",\n            success: (text) =>\n                     {\n                         BoUReapplyInterface(text)\n                     }\n        });\n    };\n\n    const onBOURelinkClick = (e) =>\n    {\n        const options = akeeba.System.getOptions(\"panopticon.backupOnUpdate\");\n        const url     = options.relink;\n\n        BoUShowSpinner();\n\n        window.akeeba.Ajax.ajax(url, {\n            method:  \"GET\",\n            success: (text) =>\n                     {\n                         BoUReapplyInterface(text)\n                     }\n        });\n    }\n\n    const onBOUReloadProfiles = (e) =>\n    {\n        const options        = akeeba.System.getOptions(\"panopticon.backupOnUpdate\");\n        const url            = options.refresh;\n        const profilesSelect = document.getElementById(\"backupOnUpdateProfiles\");\n\n        BoUShowSpinner();\n\n        window.akeeba.Ajax.ajax(url + \"&selected=\" + profilesSelect.value, {\n            method:  \"GET\",\n            success: (text) =>\n                     {\n                         profilesSelect.outerHTML = text;\n                         document.getElementById(\"backupOnUpdateReloadProfiles\")\n                                 .addEventListener(\"click\", onBOUReloadProfiles);\n\n                         BoUHideSpinner();\n                     }\n        });\n    }\n\n    const onDOMContentLoaded = () =>\n    {\n        BoUInitialise();\n\n        // Enable Choices.js\n        if (typeof Choices !== \"undefined\")\n        {\n            document.querySelectorAll(\".js-choice\")\n                    .forEach((element) =>\n                    {\n                        new Choices(\n                            element,\n                            {\n                                allowHTML:        false,\n                                placeholder:      true,\n                                placeholderValue: \"\",\n                                removeItemButton: true\n                            }\n                        );\n                    });\n        }\n    }\n\n    if (document.readyState === \"loading\")\n    {\n        document.addEventListener(\"DOMContentLoaded\", onDOMContentLoaded);\n    }\n    else\n    {\n        onDOMContentLoaded();\n    }\n})();"],"mappings":"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"}