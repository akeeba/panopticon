(function(){var a=document.getElementById("instructions"),b=document.getElementById("benchmark"),c=document.getElementById("error"),d=-1,f=function(d){a.classList.add("d-none"),b.classList.add("d-none"),c.classList.remove("d-none"),document.getElementById("errorMessage").innerHTML=d};a.classList.remove("d-none"),b.classList.add("d-none"),c.classList.add("d-none");var g=window.setInterval(function(){var c=akeeba.System.getOptions("panopticon.benchmark");akeeba.Ajax.ajax(c.url,{type:"GET",cache:!1,success:function(h){var i,j=null;try{j=JSON.parse(h)}catch(a){window.clearInterval(g);var k=new DOMParser().parseFromString(null!==h&&void 0!==h?h:"","text/html");f(akeeba.System.Text._("PANOPTICON_SETUP_CRON_ERR_INVALID_JSON")+"<pre>"+k.documentElement.textContent+"</pre>")}if(console.debug(j),j.hasTask||(window.clearInterval(g),f(akeeba.System.Text._("PANOPTICON_SETUP_CRON_ERR_NO_MAXEXEC_TASK"))),j.error&&(window.clearInterval(g),f(j.error)),!!j.started){b.classList.contains("d-none")&&(b.classList.remove("d-none"),a.classList.add("d-none"));var l=d===j.elapsed;if(d=j.elapsed,j.finished||180<=j.elapsed||l)return window.clearInterval(g),void(window.location="".concat(c.nextPage,"&").concat(c.token,"=1&maxexec=").concat(j.elapsed));var m=null!==(i=j.elapsed)&&void 0!==i?i:0,n=Math.floor(100*Math.min(1,j.elapsed/180)),o=document.getElementById("progressFill");o.style.width=n+"%",o.innerText=m+" s"}},error:function c(a,b){window.clearInterval(g);var c="";switch(b){case"timeout":c=ajax.System.Text._("PANOPTICON_SETUP_CRON_ERR_XHR_TIMEOUT");break;case"abort":c=ajax.System.Text._("PANOPTICON_SETUP_CRON_ERR_XHR_ABORT");break;default:case"error":var d=new DOMParser().parseFromString(Request.responseText?Request.responseText:"","text/html");c=akeeba.System.Text._("PANOPTICON_SETUP_CRON_ERR_AJAX_HEAD")+"<br>"+akeeba.System.Text._("PANOPTICON_SETUP_CRON_ERR_AJAX_HTTP_STATUS")+a.status+" ("+a.statusText+")<br>"+akeeba.System.Text._("PANOPTICON_SETUP_CRON_ERR_AJAX_HTTP_READYSTATE")+a.readyState+"<br>"+akeeba.System.Text._("PANOPTICON_SETUP_CRON_ERR_AJAX_HTTP_RAW")+"<div class=\"p-2 m-2 border rounded bg-light-subtle text-muted\">"+d.documentElement.textContent+"</div>"}f(c)}})},5e3)})();

//# sourceMappingURL=setup.min.js.map