function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,c){if(b){if("string"==typeof b)return _arrayLikeToArray(b,c);var a={}.toString.call(b).slice(8,-1);return"Object"===a&&b.constructor&&(a=b.constructor.name),"Map"===a||"Set"===a?Array.from(b):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(b,c):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(b,c){(null==c||c>b.length)&&(c=b.length);for(var d=0,f=Array(c);d<c;d++)f[d]=b[d];return f}(function(){var a=function(){var a;null===(a=document.getElementById("language"))||void 0===a||a.addEventListener("change",function(){var a=document.getElementById("language").value,b=akeeba.System.getOptions("login.url");window.location=b+a})},b=function(a){alert(a)},c=function(b){return btoa(String.fromCharCode.apply(String,_toConsumableArray(b)))},d=function(a){var b=a.replace(/-/g,"+").replace(/_/g,"/"),c=b.length%4;if(c){if(1===c)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");b+=Array(5-c).join("=")}return b},f=function(){var a=akeeba.System.getOptions("passkey").challengeURL;return akeeba.Ajax.ajax(a,{method:"POST",data:{},success:function(a){var c={};try{c=JSON.parse(a)}catch(a){}return c.error?void b(c.error):void(console.log(c),g(c))},error:function(a){b("".concat(a.status," ").concat(a.statusText))}}),!1},g=function(a){return a.challenge?void(a.challenge=Uint8Array.from(window.atob(d(a.challenge)),function(a){return a.charCodeAt(0)}),a.allowCredentials&&(a.allowCredentials=a.allowCredentials.map(function(a){return a.id=Uint8Array.from(window.atob(d(a.id)),function(a){return a.charCodeAt(0)}),a})),navigator.credentials.get({publicKey:a}).then(function(a){var b={id:a.id,type:a.type,rawId:c(new Uint8Array(a.rawId)),response:{authenticatorData:c(new Uint8Array(a.response.authenticatorData)),clientDataJSON:c(new Uint8Array(a.response.clientDataJSON)),signature:c(new Uint8Array(a.response.signature)),userHandle:a.response.userHandle?c(new Uint8Array(a.response.userHandle)):null}};window.location="".concat(akeeba.System.getOptions("passkey").loginURL,"&data=").concat(btoa(JSON.stringify(b)))}).catch(function(a){b(a)})):void b(akeeba.System.Text._("PANOPTICON_PASSKEYS_ERR_INVALID_USERNAME"))},h=function(){var a=[].slice.call(document.querySelectorAll(".passkey_login_button"));if(!a.length)return void console.debug("No passkey login button.");var b="undefined"!=typeof navigator.credentials;a.forEach(function(a){return b?void a.addEventListener("click",function(a){a.preventDefault(),f()}):void a.classList.add("d-none")})},i=function(){a(),h()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()})();

//# sourceMappingURL=login.min.js.map